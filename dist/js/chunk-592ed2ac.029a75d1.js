(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-592ed2ac"],{"0c18":function(e,t,a){},"0c49":function(e,t,a){"use strict";a.r(t);var i=a("8212"),r=a("8336"),s=a("b0af"),o=a("99d9"),n=a("8fea"),l=a("169a"),d=a("132d"),c=a("adda"),h=a("2fa4"),u=a("8654"),g=a("2f62"),m=(a("0c18"),a("10d2")),f=a("afdd"),p=a("9d26"),v=a("f2e7"),y=a("7560"),w=a("2b0e").a.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}}),x=a("58df"),b=a("d9bd"),_=a("80d2"),C=Object(x.a)(m.a,v.a,w).extend({name:"v-alert",props:{border:{type:String,validator:e=>["top","right","bottom","left"].includes(e)},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:e=>"string"==typeof e||!1===e},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:e=>["info","error","success","warning"].includes(e)},value:{type:Boolean,default:!0}},computed:{__cachedBorder(){if(!this.border)return null;let e={staticClass:"v-alert__border",class:{["v-alert__border--"+this.border]:!0}};return this.coloredBorder&&(e=this.setBackgroundColor(this.computedColor,e),e.class["v-alert__border--has-color"]=!0),this.$createElement("div",e)},__cachedDismissible(){if(!this.dismissible)return null;const e=this.iconColor;return this.$createElement(f.a,{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:()=>this.isActive=!1}},[this.$createElement(p.a,{props:{color:e}},this.closeIcon)])},__cachedIcon(){return this.computedIcon?this.$createElement(p.a,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes(){const e={...m.a.options.computed.classes.call(this),"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text};return this.border&&(e["v-alert--border-"+this.border]=!0),e},computedColor(){return this.color||this.type},computedIcon(){return!1!==this.icon&&("string"==typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$"+this.type)},hasColoredIcon(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText(){return this.text||this.outlined},iconColor(){return this.hasColoredIcon?this.computedColor:void 0},isDark(){return!(!this.type||this.coloredBorder||this.outlined)||y.a.options.computed.isDark.call(this)}},created(){this.$attrs.hasOwnProperty("outline")&&Object(b.a)("outline","outlined",this)},methods:{genWrapper(){const e=[Object(_.r)(this,"prepend")||this.__cachedIcon,this.genContent(),this.__cachedBorder,Object(_.r)(this,"append"),this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible];return this.$createElement("div",{staticClass:"v-alert__wrapper"},e)},genContent(){return this.$createElement("div",{staticClass:"v-alert__content"},Object(_.r)(this))},genAlert(){let e={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){e=(this.hasText?this.setTextColor:this.setBackgroundColor)(this.computedColor,e)}return this.$createElement("div",e,[this.genWrapper()])},toggle(){this.isActive=!this.isActive}},render(e){const t=this.genAlert();return this.transition?e("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[t]):t}}),k=(a("14d9"),a("63b7"),a("0643"),a("fffc"),a("13b3"),a("c3f0")),T=a("604c"),A=T.a.extend({name:"v-window",directives:{Touch:k.a},provide(){return{windowGroup:this}},props:{activeClass:{type:String,default:"v-window-item--active"},continuous:Boolean,mandatory:{type:Boolean,default:!0},nextIcon:{type:[Boolean,String],default:"$next"},prevIcon:{type:[Boolean,String],default:"$prev"},reverse:Boolean,showArrows:Boolean,showArrowsOnHover:Boolean,touch:Object,touchless:Boolean,value:{required:!1},vertical:Boolean},data:()=>({changedByDelimiters:!1,internalHeight:void 0,transitionHeight:void 0,transitionCount:0,isBooted:!1,isReverse:!1}),computed:{isActive(){return this.transitionCount>0},classes(){return{...T.a.options.computed.classes.call(this),"v-window--show-arrows-on-hover":this.showArrowsOnHover}},computedTransition(){if(!this.isBooted)return"";return`v-window-${this.vertical?"y":"x"}${(this.internalReverse?!this.isReverse:this.isReverse)?"-reverse":""}-transition`},hasActiveItems(){return Boolean(this.items.find(e=>!e.disabled))},hasNext(){return this.continuous||this.internalIndex<this.items.length-1},hasPrev(){return this.continuous||this.internalIndex>0},internalIndex(){return this.items.findIndex((e,t)=>this.internalValue===this.getValue(e,t))},internalReverse(){return this.$vuetify.rtl?!this.reverse:this.reverse}},watch:{internalIndex(e,t){this.isReverse=this.updateReverse(e,t)}},mounted(){window.requestAnimationFrame(()=>this.isBooted=!0)},methods:{genDefaultSlot(){return Object(_.r)(this)},genContainer(){const e=[this.genDefaultSlot()];return this.showArrows&&e.push(this.genControlIcons()),this.$createElement("div",{staticClass:"v-window__container",class:{"v-window__container--is-active":this.isActive},style:{height:this.internalHeight||this.transitionHeight}},e)},genIcon(e,t,a){var i,r,s;const o={click:e=>{e.stopPropagation(),this.changedByDelimiters=!0,a()}},n={"aria-label":this.$vuetify.lang.t("$vuetify.carousel."+e)},l=null!==(s=null===(r=(i=this.$scopedSlots)[e])||void 0===r?void 0:r.call(i,{on:o,attrs:n}))&&void 0!==s?s:[this.$createElement(f.a,{props:{icon:!0},attrs:n,on:o},[this.$createElement(p.a,{props:{large:!0}},t)])];return this.$createElement("div",{staticClass:"v-window__"+e},l)},genControlIcons(){const e=[],t=this.$vuetify.rtl?this.nextIcon:this.prevIcon;if(this.hasPrev&&t&&"string"==typeof t){const a=this.genIcon("prev",t,this.prev);a&&e.push(a)}const a=this.$vuetify.rtl?this.prevIcon:this.nextIcon;if(this.hasNext&&a&&"string"==typeof a){const t=this.genIcon("next",a,this.next);t&&e.push(t)}return e},getNextIndex(e){const t=(e+1)%this.items.length;return this.items[t].disabled?this.getNextIndex(t):t},getPrevIndex(e){const t=(e+this.items.length-1)%this.items.length;return this.items[t].disabled?this.getPrevIndex(t):t},next(){if(!this.hasActiveItems||!this.hasNext)return;const e=this.getNextIndex(this.internalIndex),t=this.items[e];this.internalValue=this.getValue(t,e)},prev(){if(!this.hasActiveItems||!this.hasPrev)return;const e=this.getPrevIndex(this.internalIndex),t=this.items[e];this.internalValue=this.getValue(t,e)},updateReverse(e,t){const a=this.items.length,i=a-1;return a<=2?e<t:e===i&&0===t||(0!==e||t!==i)&&e<t}},render(e){const t={staticClass:"v-window",class:this.classes,directives:[]};if(!this.touchless){const e=this.touch||{left:()=>{this.$vuetify.rtl?this.prev():this.next()},right:()=>{this.$vuetify.rtl?this.next():this.prev()},end:e=>{e.stopPropagation()},start:e=>{e.stopPropagation()}};t.directives.push({name:"touch",value:e})}return e("div",t,[this.genContainer()])}}),S=a("37c6"),F=T.a.extend({name:"button-group",provide(){return{btnToggle:this}},computed:{classes(){return T.a.options.computed.classes.call(this)}},methods:{genData:T.a.options.methods.genData}}),I=A.extend({name:"v-carousel",props:{continuous:{type:Boolean,default:!0},cycle:Boolean,delimiterIcon:{type:String,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>e>0},mandatory:{type:Boolean,default:!0},progress:Boolean,progressColor:String,showArrows:{type:Boolean,default:!0},verticalDelimiters:{type:String,default:void 0}},provide(){return{parentTheme:this.theme}},data(){return{internalHeight:this.height,slideTimeout:void 0}},computed:{classes(){return{...A.options.computed.classes.call(this),"v-carousel":!0,"v-carousel--hide-delimiter-background":this.hideDelimiterBackground,"v-carousel--vertical-delimiters":this.isVertical}},isDark(){return this.dark||!this.light},isVertical(){return null!=this.verticalDelimiters}},watch:{internalValue:"restartTimeout",interval:"restartTimeout",height(e,t){e!==t&&e&&(this.internalHeight=e)},cycle(e){e?this.restartTimeout():(clearTimeout(this.slideTimeout),this.slideTimeout=void 0)}},created(){this.$attrs.hasOwnProperty("hide-controls")&&Object(b.a)("hide-controls",':show-arrows="false"',this)},mounted(){this.startTimeout()},methods:{genControlIcons(){return this.isVertical?null:A.options.methods.genControlIcons.call(this)},genDelimiters(){return this.$createElement("div",{staticClass:"v-carousel__controls",style:{left:"left"===this.verticalDelimiters&&this.isVertical?0:"auto",right:"right"===this.verticalDelimiters?0:"auto"}},[this.genItems()])},genItems(){const e=this.items.length,t=[];for(let a=0;a<e;a++){const i=this.$createElement(f.a,{staticClass:"v-carousel__controls__item",attrs:{"aria-label":this.$vuetify.lang.t("$vuetify.carousel.ariaLabel.delimiter",a+1,e)},props:{icon:!0,small:!0,value:this.getValue(this.items[a],a)},key:a},[this.$createElement(p.a,{props:{size:18}},this.delimiterIcon)]);t.push(i)}return this.$createElement(F,{props:{value:this.internalValue,mandatory:this.mandatory},on:{change:e=>{this.internalValue=e}}},t)},genProgress(){return this.$createElement(S.a,{staticClass:"v-carousel__progress",props:{color:this.progressColor,value:(this.internalIndex+1)/this.items.length*100}})},restartTimeout(){this.slideTimeout&&clearTimeout(this.slideTimeout),this.slideTimeout=void 0,window.requestAnimationFrame(this.startTimeout)},startTimeout(){this.cycle&&(this.slideTimeout=window.setTimeout(this.next,+this.interval>0?+this.interval:6e3))}},render(e){const t=A.options.render.call(this,e);return t.data.style=`height: ${Object(_.h)(this.height)};`,this.hideDelimiters||t.children.push(this.genDelimiters()),(this.progress||this.progressColor)&&t.children.push(this.genProgress()),t}}),D=a("9d65"),R=a("4e82");var $=Object(x.a)(D.a,Object(R.a)("windowGroup","v-window-item","v-window")).extend().extend().extend({name:"v-window-item",directives:{Touch:k.a},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data:()=>({isActive:!1,inTransition:!1}),computed:{classes(){return this.groupClasses},computedTransition(){return this.windowGroup.internalReverse?void 0!==this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:void 0!==this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot(){return Object(_.r)(this)},genWindowItem(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=Object(_.h)(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled(){this.onAfterTransition()},onEnter(e){this.inTransition&&this.$nextTick(()=>{this.computedTransition&&this.inTransition&&(this.windowGroup.transitionHeight=Object(_.h)(e.clientHeight))})}},render(e){return e("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent(()=>[this.genWindowItem()]))}}),G=a("1c87");var B=Object(x.a)($,G.a).extend().extend({name:"v-carousel-item",inject:{parentTheme:{default:{isDark:!1}}},provide(){return{theme:this.parentTheme}},inheritAttrs:!1,methods:{genDefaultSlot(){return[this.$createElement(c.a,{staticClass:"v-carousel__item",props:{...this.$attrs,height:this.windowGroup.internalHeight},on:this.$listeners,scopedSlots:{placeholder:this.$scopedSlots.placeholder}},Object(_.r)(this))]},genWindowItem(){const{tag:e,data:t}=this.generateRouteLink();return t.staticClass="v-window-item",t.directives.push({name:"show",value:this.isActive}),this.$createElement(e,t,this.genDefaultSlot())}}}),E=a("cc20"),L=a("62ad"),P=a("ce7e"),M=a("0fd9"),O=a("b974"),N=(a("d9e2"),a("4e3e"),a("a573"),a("bc3a")),j=a.n(N),H={data:()=>({months:[{name:"January",value:1},{name:"February",value:2},{name:"March",value:3},{name:"April",value:4},{name:"May",value:5},{name:"June",value:6},{name:"July",value:7},{name:"August",value:8},{name:"September",value:9},{name:"October",value:10},{name:"November",value:11},{name:"December",value:12}],selectedMonth:(new Date).getMonth()+1,selectedYear:(new Date).getFullYear(),dialog:!1,searchLoading:!1,assignLoading:!1,generateLoading:!1,certificateLoading:!1,hasSearched:!1,topGymGoers:[],rewardDays:{rankA:10,rankB:5,rankC:3},headers:[{text:"Position",value:"position",sortable:!1,width:"80px"},{text:"",value:"profile",sortable:!1,width:"70px"},{text:"Name",value:"name"},{text:"Rank",value:"rank",sortable:!1},{text:"Attendance",value:"attendances_count"},{text:"Total Gym Time",value:"formatted_gym_time",sortable:!1},{text:"Reward Tier",value:"reward_tier",sortable:!1}],leaderboardDialog:!1,leaderboardImage:null,certificateDialog:!1,generatedCertificates:[],bgImage:null,logoImage:null,imagesLoaded:!1}),methods:{async openModal(){this.dialog=!0,await this.search()},getRankInfo:e=>({Novice:{color:"grey",stars:1},Lifter:{color:"grey darken-1",stars:2},Veteran:{color:"grey darken-2",stars:3},Master:{color:"red lighten-1",stars:4},Legendary:{color:"red darken-1",stars:5},Beast:{color:"red darken-3",stars:6}}[e]||{color:"grey",stars:1}),getPositionColor:e=>0===e?"red darken-1":1===e?"grey darken-1":2===e?"grey darken-3":"grey",getRewardTier:e=>e<3?"Rank A":e<6?"Rank B":"Rank C",getRewardTierColor:e=>e<3?"red darken-1":e<6?"grey darken-1":"grey darken-3",getRewardDaysForPosition(e){return e<3?this.rewardDays.rankA:e<6?this.rewardDays.rankB:this.rewardDays.rankC},async search(){this.searchLoading=!0,this.hasSearched=!0;try{const e=await j.a.get(`/get_top_gymmer_of_the_month/${this.selectedMonth}/${this.selectedYear}`);this.topGymGoers=e.data}catch(e){console.error("Error fetching top gym goers:",e),alert("Error fetching data: "+e.message)}finally{this.searchLoading=!1}},async assignRewards(){var e;if(0===this.topGymGoers.length)return void alert("No gym goers to assign rewards to.");const t=null===(e=this.months.find(e=>e.value===this.selectedMonth))||void 0===e?void 0:e.name,a=`Are you sure you want to assign rewards to all ${this.topGymGoers.length} top gym goers for ${t} ${this.selectedYear}?\n\nThis will add days to their monthly expiration:\n- Top 1-3: +${this.rewardDays.rankA} days\n- Top 4-6: +${this.rewardDays.rankB} days\n- Top 7-10: +${this.rewardDays.rankC} days`;if(confirm(a)){this.assignLoading=!0;try{var i;const e=this.topGymGoers.slice(0,3).map(e=>({id:e.id,name:e.name})),t=this.topGymGoers.slice(3,6).map(e=>({id:e.id,name:e.name})),a=this.topGymGoers.slice(6,10).map(e=>({id:e.id,name:e.name})),r={month:null===(i=this.months.find(e=>e.value===this.selectedMonth))||void 0===i?void 0:i.name,year:this.selectedYear,selectedRankA:e,selectedRankB:t,selectedRankC:a,rankA:this.rewardDays.rankA,rankB:this.rewardDays.rankB,rankC:this.rewardDays.rankC};await j.a.post("/assign_rewards",r),alert("Rewards assigned successfully!")}catch(e){var r;console.error("Error assigning rewards:",e),alert("Error assigning rewards: "+((null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.message)||e.message))}finally{this.assignLoading=!1}}},loadImage:e=>new Promise((t,a)=>{const i=new Image;i.crossOrigin="anonymous",i.onload=()=>t(i),i.onerror=()=>a(new Error("Failed to load: "+e)),i.src=e}),getApiBaseUrl:()=>(j.a.defaults.baseURL||"").replace(/\/api\/?$/,""),async loadAssets(){if(!this.imagesLoaded)try{const e=(await j.a.get("/get_gym_assets")).data;e.logo&&(this.logoImage=await this.loadImage(e.logo),console.log("Logo loaded from API (base64)")),e.background&&(this.bgImage=await this.loadImage(e.background),console.log("Background loaded from API (base64)")),this.imagesLoaded=!0}catch(e){console.error("Failed to load assets from API:",e);const t=this.getApiBaseUrl(),a=[{type:"logo",url:t+"/storage/AlphaLogo.jpg"},{type:"bg",url:t+"/storage/AlphaBackground.jpg"}];for(const e of a)try{"logo"===e.type?this.logoImage=await this.loadImage(e.url):this.bgImage=await this.loadImage(e.url)}catch(t){console.log(`Failed to load ${e.type} from:`,e.url)}this.imagesLoaded=!0}},async generateLeaderboard(){if(0!==this.topGymGoers.length){this.generateLoading=!0;try{var e;await this.loadAssets();const t=null===(e=this.months.find(e=>e.value===this.selectedMonth))||void 0===e?void 0:e.name;this.leaderboardImage=this.drawLeaderboard(t),this.leaderboardDialog=!0}catch(e){console.error("Error generating leaderboard:",e),alert("Error generating leaderboard: "+e.message)}finally{this.generateLoading=!1}}else alert("No gym goers to generate leaderboard for.")},drawLeaderboard(e){const t=document.createElement("canvas"),a=t.getContext("2d");t.width=1080,t.height=1350;const i=a.createLinearGradient(0,0,0,t.height);i.addColorStop(0,"#1a1a1a"),i.addColorStop(.5,"#2d2d2d"),i.addColorStop(1,"#1a1a1a"),a.fillStyle=i,a.fillRect(0,0,t.width,t.height),a.fillStyle="#CC0000",a.fillRect(0,0,t.width,8);const r=60;if(this.logoImage){const e=100;a.save(),a.beginPath(),a.arc(t.width/2,110,e/2,0,2*Math.PI),a.closePath(),a.clip(),a.drawImage(this.logoImage,t.width/2-e/2,r,e,e),a.restore(),a.beginPath(),a.arc(t.width/2,110,e/2+4,0,2*Math.PI),a.strokeStyle="#CC0000",a.lineWidth=6,a.stroke()}a.fillStyle="#FFFFFF",a.font="bold 28px Arial, sans-serif",a.textAlign="center",a.fillText("ALPHA FITNESS GYM",t.width/2,200),a.fillStyle="#AAAAAA",a.font="16px Arial, sans-serif",a.fillText("Cantilan, Surigao del Sur",t.width/2,225),a.fillStyle="#FFFFFF",a.font="bold 72px Impact, sans-serif",a.fillText(e.toUpperCase(),t.width/2,310),a.fillText(this.selectedYear.toString(),t.width/2,380),a.strokeStyle="#CC0000",a.lineWidth=4,a.beginPath(),a.moveTo(t.width/2-150,400),a.lineTo(t.width/2+150,400),a.stroke(),a.fillStyle="#CC0000",a.font="bold 42px Impact, sans-serif",a.fillText("TOP 10 GYM-GOERS",t.width/2,450);return this.topGymGoers.slice(0,10).forEach((e,i)=>{const r=500+75*i,s=i<3;if(s){const e=a.createLinearGradient(80,r,t.width-80,r);0===i?(e.addColorStop(0,"rgba(204, 0, 0, 0.4)"),e.addColorStop(1,"rgba(204, 0, 0, 0.1)")):(e.addColorStop(0,"rgba(100, 100, 100, 0.4)"),e.addColorStop(1,"rgba(100, 100, 100, 0.1)")),a.fillStyle=e}else a.fillStyle="rgba(255, 255, 255, 0.08)";this.roundRect(a,80,r,t.width-160,67,10),a.fill();a.beginPath(),a.arc(130,r+33.5,25,0,2*Math.PI),a.fillStyle=0===i?"#CC0000":i<3?"#666666":"#444444",a.fill(),a.fillStyle="#FFFFFF",a.font="bold 20px Arial, sans-serif",a.textAlign="center",a.fillText(""+(i+1),130,r+33.5+7);const o=r+33.5;a.beginPath(),a.arc(200,o,22,0,2*Math.PI),a.fillStyle="#333333",a.fill(),a.strokeStyle=s?"#CC0000":"#666666",a.lineWidth=2,a.stroke(),a.fillStyle="#FFFFFF",a.font="bold 18px Arial, sans-serif",a.textAlign="center",a.fillText(e.name.charAt(0).toUpperCase(),200,o+6),a.fillStyle="#FFFFFF",a.font=s?"bold 20px Arial, sans-serif":"18px Arial, sans-serif",a.textAlign="left",a.fillText(e.name.toUpperCase(),245,r+28),a.fillStyle=this.getRankColorForCanvas(e.rank),a.font="bold 14px Arial, sans-serif";const n=e.rank.toUpperCase();a.fillText(n,245,r+52);const l=this.getRankInfo(e.rank);a.fillStyle="#888888";const d=245+a.measureText(n).width+8;for(let e=0;e<l.stars;e++)a.fillText("★",d+15*e,r+52);a.textAlign="right",a.fillStyle="#FFFFFF",a.font="bold 24px Arial, sans-serif",a.fillText(""+e.attendances_count,t.width-200,r+32),a.fillStyle="#888888",a.font="12px Arial, sans-serif",a.fillText("ATTENDANCE",t.width-200,r+50);const c=Math.floor(e.total_gym_time/60);a.fillStyle="#FFFFFF",a.font="bold 24px Arial, sans-serif",a.fillText(""+c,t.width-100,r+32),a.fillStyle="#888888",a.font="12px Arial, sans-serif",a.fillText("HOURS",t.width-100,r+50)}),a.fillStyle="#CC0000",a.fillRect(0,t.height-8,t.width,8),a.fillStyle="#888888",a.font="14px Arial, sans-serif",a.textAlign="center",a.fillText("www.facebook.com/alphafitnessgymcantilan",t.width/2,t.height-30),t.toDataURL("image/png")},roundRect(e,t,a,i,r,s){e.beginPath(),e.moveTo(t+s,a),e.lineTo(t+i-s,a),e.quadraticCurveTo(t+i,a,t+i,a+s),e.lineTo(t+i,a+r-s),e.quadraticCurveTo(t+i,a+r,t+i-s,a+r),e.lineTo(t+s,a+r),e.quadraticCurveTo(t,a+r,t,a+r-s),e.lineTo(t,a+s),e.quadraticCurveTo(t,a,t+s,a),e.closePath()},getRankColorForCanvas:e=>({Novice:"#888888",Lifter:"#777777",Veteran:"#666666",Master:"#CC0000",Legendary:"#AA0000",Beast:"#880000"}[e]||"#888888"),async generateCertificates(){if(0!==this.topGymGoers.length){this.certificateLoading=!0,this.generatedCertificates=[];try{var e;await this.loadAssets();const t=null===(e=this.months.find(e=>e.value===this.selectedMonth))||void 0===e?void 0:e.name;for(let e=0;e<Math.min(this.topGymGoers.length,10);e++){const a=this.topGymGoers[e],i=this.drawCertificate(a,e+1,t);this.generatedCertificates.push({name:a.name,dataUrl:i,position:e+1})}this.certificateDialog=!0}catch(e){console.error("Error generating certificates:",e),alert("Error generating certificates: "+e.message)}finally{this.certificateLoading=!1}}else alert("No gym goers to generate certificates for.")},drawCertificate(e,t,a){const i=document.createElement("canvas"),r=i.getContext("2d");i.width=1200,i.height=850;const s=r.createLinearGradient(0,0,0,i.height);s.addColorStop(0,"#1a1a1a"),s.addColorStop(.5,"#2d2d2d"),s.addColorStop(1,"#1a1a1a"),r.fillStyle=s,r.fillRect(0,0,i.width,i.height),r.fillStyle="#CC0000",r.fillRect(0,0,i.width,8),r.fillRect(0,i.height-8,i.width,8),r.fillRect(0,0,8,i.height),r.fillRect(i.width-8,0,8,i.height);const o=t<=3,n=200;if(this.logoImage){const e=100;r.save(),r.beginPath(),r.arc(n,120,e/2,0,2*Math.PI),r.closePath(),r.clip(),r.drawImage(this.logoImage,n-e/2,70,e,e),r.restore(),r.beginPath(),r.arc(n,120,e/2+4,0,2*Math.PI),r.strokeStyle="#CC0000",r.lineWidth=5,r.stroke()}r.fillStyle="#FFFFFF",r.font="bold 18px Arial, sans-serif",r.textAlign="center",r.fillText("ALPHA FITNESS GYM",n,200),r.fillStyle="#888888",r.font="12px Arial, sans-serif",r.fillText("Cantilan, Surigao del Sur",n,220);r.beginPath(),r.arc(n,420,90,0,2*Math.PI),r.fillStyle=1===t?"#CC0000":o?"#555555":"#333333",r.fill(),r.strokeStyle="#FFFFFF",r.lineWidth=4,r.stroke(),r.fillStyle="#FFFFFF",r.font="bold 80px Impact, sans-serif",r.fillText("#"+t,n,448),r.fillStyle="#AAAAAA",r.font="bold 20px Arial, sans-serif",r.fillText(this.getPositionText(t),n,550);const l=720;r.fillStyle="#CC0000",r.font="bold 52px Impact, sans-serif",r.textAlign="center",r.fillText("CERTIFICATE",l,100),r.fillStyle="#FFFFFF",r.font="bold 36px Impact, sans-serif",r.fillText("OF ACHIEVEMENT",l,145),r.strokeStyle="#CC0000",r.lineWidth=3,r.beginPath(),r.moveTo(520,170),r.lineTo(920,170),r.stroke(),r.fillStyle="#888888",r.font="20px Arial, sans-serif",r.fillText("This certificate is proudly presented to",l,220);this.roundRect(r,370,250,700,100,15),r.fillStyle="rgba(204, 0, 0, 0.3)",r.fill(),r.strokeStyle="#CC0000",r.lineWidth=2,r.stroke(),r.fillStyle="#FFFFFF",r.font="bold 56px Arial, sans-serif",r.fillText(e.name.toUpperCase(),l,318);const d=this.getRankInfo(e.rank),c="★".repeat(d.stars);r.fillStyle=this.getRankColorForCanvas(e.rank),r.font="bold 20px Arial, sans-serif",r.fillText(`${e.rank.toUpperCase()} ${c}`,l,370),r.fillStyle="#AAAAAA",r.font="22px Arial, sans-serif",r.fillText("For being the",l,420),r.fillStyle="#CC0000",r.font="bold 42px Impact, sans-serif",r.fillText(`TOP GYM GOER OF ${a.toUpperCase()} ${this.selectedYear}`,l,470);const h=510;this.roundRect(r,420,h,600,80,10),r.fillStyle="rgba(255, 255, 255, 0.08)",r.fill(),r.fillStyle="#FFFFFF",r.font="bold 32px Arial, sans-serif",r.fillText(""+e.attendances_count,600,550),r.fillStyle="#888888",r.font="12px Arial, sans-serif",r.fillText("ATTENDANCE",600,570);const u=Math.floor(e.total_gym_time/60);r.fillStyle="#FFFFFF",r.font="bold 32px Arial, sans-serif",r.fillText(""+u,840,550),r.fillStyle="#888888",r.font="12px Arial, sans-serif",r.fillText("HOURS",840,570),r.strokeStyle="#444444",r.lineWidth=2,r.beginPath(),r.moveTo(l,525),r.lineTo(l,575),r.stroke();const g=this.getRewardDaysForPosition(t-1),m=e.expiry_date||"N/A";let f="N/A";if(e.expiry_date&&"N/A"!==e.expiry_date)try{const t=new Date(e.expiry_date);t.setDate(t.getDate()+g),f=t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(e){f="N/A"}const p=610;return this.roundRect(r,420,p,600,90,10),r.fillStyle="rgba(255, 255, 255, 0.05)",r.fill(),r.fillStyle="#888888",r.font="12px Arial, sans-serif",r.fillText("CURRENT EXPIRY",600,635),r.fillStyle="#FFFFFF",r.font="bold 18px Arial, sans-serif",r.fillText(m,600,660),r.fillStyle="#CC0000",r.font="bold 28px Arial, sans-serif",r.fillText("→",l,655),r.fillStyle="#888888",r.font="12px Arial, sans-serif",r.fillText("NEW EXPIRY",840,635),r.fillStyle="#00CC00",r.font="bold 18px Arial, sans-serif",r.fillText(f,840,660),r.fillStyle="#CC0000",r.font="bold 16px Arial, sans-serif",r.fillText(`+${g} DAYS REWARD`,l,690),r.fillStyle="#666666",r.font="14px Arial, sans-serif",r.fillText("www.facebook.com/alphafitnessgymcantilan",l,760),i.toDataURL("image/png")},getPositionText:e=>1===e?"1ST PLACE":2===e?"2ND PLACE":3===e?"3RD PLACE":e+"TH PLACE",downloadLeaderboard(){var e;const t=null===(e=this.months.find(e=>e.value===this.selectedMonth))||void 0===e?void 0:e.name,a=document.createElement("a");a.download=`top_gym_goers_${t}_${this.selectedYear}.png`,a.href=this.leaderboardImage,a.click()},downloadCertificate(e){const t=document.createElement("a");t.download=`certificate_${e.position}_${e.name.replace(/\s+/g,"_")}.png`,t.href=e.dataUrl,t.click()},downloadAllCertificates(){this.generatedCertificates.forEach((e,t)=>{setTimeout(()=>{this.downloadCertificate(e)},300*t)})}}},U=(a("316e"),a("2877")),Y={components:{TopGymmersMonthlyModal:Object(U.a)(H,(function(){var e=this,t=e._self._c;return t("div",[t(r.a,{attrs:{color:"red darken-1",dark:""},on:{click:e.openModal}},[t(d.a,{attrs:{left:""}},[e._v("mdi-trophy")]),e._v(" Monthly Top Gym-Goers ")],1),t(l.a,{attrs:{width:"1100",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(s.a,[t(o.c,{staticClass:"headline red darken-2 white--text"},[t(d.a,{attrs:{left:"",color:"white"}},[e._v("mdi-trophy")]),e._v(" Top Monthly Gym-Goers & Rewards ")],1),t(o.b,{staticClass:"pt-4"},[t(M.a,{attrs:{align:"center"}},[t(L.a,{attrs:{cols:"3"}},[t(O.a,{attrs:{items:e.months,"item-text":"name","item-value":"value",label:"Month",outlined:"",dense:""},model:{value:e.selectedMonth,callback:function(t){e.selectedMonth=t},expression:"selectedMonth"}})],1),t(L.a,{attrs:{cols:"2"}},[t(O.a,{attrs:{items:[2024,2025,2026,2027],label:"Year",outlined:"",dense:""},model:{value:e.selectedYear,callback:function(t){e.selectedYear=t},expression:"selectedYear"}})],1),t(L.a,{attrs:{cols:"2"}},[t(r.a,{attrs:{color:"red darken-1",dark:"",loading:e.searchLoading},on:{click:e.search}},[t(d.a,{attrs:{left:""}},[e._v("mdi-magnify")]),e._v(" Search ")],1)],1)],1),t(s.a,{staticClass:"mb-4 pa-3",attrs:{outlined:""}},[t("h4",{staticClass:"mb-3"},[e._v("Reward Days Configuration")]),t(M.a,[t(L.a,{attrs:{cols:"4"}},[t(u.a,{attrs:{label:"Top 1-3 (Rank A)",type:"number","prepend-icon":"mdi-medal",outlined:"",dense:"",suffix:"days",color:"red darken-1"},model:{value:e.rewardDays.rankA,callback:function(t){e.$set(e.rewardDays,"rankA",e._n(t))},expression:"rewardDays.rankA"}})],1),t(L.a,{attrs:{cols:"4"}},[t(u.a,{attrs:{label:"Top 4-6 (Rank B)",type:"number","prepend-icon":"mdi-medal",outlined:"",dense:"",suffix:"days",color:"grey darken-1"},model:{value:e.rewardDays.rankB,callback:function(t){e.$set(e.rewardDays,"rankB",e._n(t))},expression:"rewardDays.rankB"}})],1),t(L.a,{attrs:{cols:"4"}},[t(u.a,{attrs:{label:"Top 7-10 (Rank C)",type:"number","prepend-icon":"mdi-medal",outlined:"",dense:"",suffix:"days",color:"grey darken-3"},model:{value:e.rewardDays.rankC,callback:function(t){e.$set(e.rewardDays,"rankC",e._n(t))},expression:"rewardDays.rankC"}})],1)],1)],1),t(n.a,{staticClass:"elevation-1",attrs:{items:e.topGymGoers,headers:e.headers,loading:e.searchLoading,"disable-pagination":"","hide-default-footer":""},scopedSlots:e._u([{key:"item.position",fn:function({index:a}){return[t(E.a,{attrs:{color:e.getPositionColor(a),dark:"",small:""}},[e._v(" #"+e._s(a+1)+" ")])]}},{key:"item.profile",fn:function({item:a}){return[t("div",{staticClass:"pa-2"},[t(i.a,{attrs:{size:"45",color:"grey darken-3"}},[a.profile_picture_url&&"n/a"!==a.profile_picture_url?t(c.a,{attrs:{src:a.profile_picture_url}}):t("h2",{staticClass:"white--text"},[e._v(" "+e._s(a.name.charAt(0))+" ")])],1)],1)]}},{key:"item.rank",fn:function({item:a}){return[t(E.a,{attrs:{color:e.getRankInfo(a.rank).color,dark:"",small:""}},[e._v(" "+e._s(a.rank)+" "),e._l(e.getRankInfo(a.rank).stars,(function(a){return t(d.a,{key:a,attrs:{small:"",right:""}},[e._v(" mdi-star ")])}))],2)]}},{key:"item.formatted_gym_time",fn:function({item:a}){return[t("span",[e._v(e._s(Math.floor(a.total_gym_time/60))+" hrs "+e._s(a.total_gym_time%60)+" mins")])]}},{key:"item.reward_tier",fn:function({index:a}){return[t(E.a,{attrs:{color:e.getRewardTierColor(a),dark:"",small:""}},[e._v(" "+e._s(e.getRewardTier(a))+" (+"+e._s(e.getRewardDaysForPosition(a))+" days) ")])]}}],null,!0)}),0===e.topGymGoers.length&&!e.searchLoading&&e.hasSearched?t(C,{staticClass:"mt-4",attrs:{type:"info"}},[e._v(" No gym goers found for the selected month and year. ")]):e._e()],1),t(P.a),t(o.a,{staticClass:"pa-4"},[t(r.a,{attrs:{color:"red darken-1",dark:"",loading:e.assignLoading,disabled:0===e.topGymGoers.length},on:{click:e.assignRewards}},[t(d.a,{attrs:{left:""}},[e._v("mdi-gift")]),e._v(" Assign Rewards to All ")],1),t(r.a,{attrs:{color:"grey darken-3",dark:"",loading:e.generateLoading,disabled:0===e.topGymGoers.length},on:{click:e.generateLeaderboard}},[t(d.a,{attrs:{left:""}},[e._v("mdi-image")]),e._v(" Generate Leaderboard ")],1),t(r.a,{attrs:{color:"grey darken-1",dark:"",loading:e.certificateLoading,disabled:0===e.topGymGoers.length},on:{click:e.generateCertificates}},[t(d.a,{attrs:{left:""}},[e._v("mdi-certificate")]),e._v(" Generate Certificates ")],1),t(h.a),t(r.a,{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),t(l.a,{attrs:{width:"1000"},model:{value:e.leaderboardDialog,callback:function(t){e.leaderboardDialog=t},expression:"leaderboardDialog"}},[t(s.a,[t(o.c,{staticClass:"red darken-2 white--text"},[e._v("Generated Leaderboard")]),t(o.b,{staticClass:"text-center pa-4"},[e.leaderboardImage?t(c.a,{attrs:{src:e.leaderboardImage,contain:"","max-height":"700"}}):e._e()],1),t(o.a,[t(r.a,{attrs:{color:"red darken-1",dark:""},on:{click:e.downloadLeaderboard}},[t(d.a,{attrs:{left:""}},[e._v("mdi-download")]),e._v(" Download Image ")],1),t(h.a),t(r.a,{attrs:{text:""},on:{click:function(t){e.leaderboardDialog=!1}}},[e._v("Close")])],1)],1)],1),t(l.a,{attrs:{width:"1000"},model:{value:e.certificateDialog,callback:function(t){e.certificateDialog=t},expression:"certificateDialog"}},[t(s.a,[t(o.c,{staticClass:"red darken-2 white--text"},[e._v("Generated Certificates")]),t(o.b,{staticClass:"pa-4"},[e.generatedCertificates.length>0?t(I,{attrs:{height:"550","hide-delimiter-background":"","show-arrows-on-hover":""}},e._l(e.generatedCertificates,(function(a,i){return t(B,{key:i},[t(c.a,{attrs:{src:a.dataUrl,contain:"",height:"450"}}),t("div",{staticClass:"text-center mt-2"},[t(r.a,{attrs:{color:"red darken-1",dark:""},on:{click:function(t){return e.downloadCertificate(a)}}},[t(d.a,{attrs:{left:""}},[e._v("mdi-download")]),e._v(" Download #"+e._s(a.position)+" - "+e._s(a.name)+" ")],1)],1)],1)})),1):e._e()],1),t(o.a,[t(r.a,{attrs:{color:"grey darken-3",dark:""},on:{click:e.downloadAllCertificates}},[t(d.a,{attrs:{left:""}},[e._v("mdi-download-multiple")]),e._v(" Download All ")],1),t(h.a),t(r.a,{attrs:{text:""},on:{click:function(t){e.certificateDialog=!1}}},[e._v("Close")])],1)],1)],1)],1)}),[],!1,null,"609fd9a3",null).exports},data:()=>({dialog:!0,button_loading:!1,search:"",top_gymmers_header:[{text:"No.",value:"no"},{text:"",value:"action"},{text:"Name",value:"name"},{text:"Rank",value:"rank"},{text:"Registered",value:"created_at"},{text:"Expiration Date",value:"expiry_date"},{text:"Total Att. Rows",value:"total_attendance_rows"},{text:"Total Gym Time",value:"formatted_gym_time"}]}),computed:{...Object(g.c)({top_gymmers:"account/top_gymmers"})},methods:{...Object(g.b)({get_top_gymmers:"account/get_top_gymmers"}),get_rank:e=>"Novice"==e?{color:"brown",stars:1}:"Lifter"==e?{color:"blue",stars:2}:"Veteran"==e?{color:"grey",stars:3}:"Master"==e?{color:"yellow ",stars:4}:"Legendary"==e?{color:"red",stars:5}:"Beast"==e?{color:"deep-orange accent-3",stars:6}:void 0,submit(){}},created(){this.top_gymmers.length<=0&&this.get_top_gymmers()}},V=Object(U.a)(Y,(function(){var e=this,t=e._self._c;return t("div",[t(l.a,{attrs:{width:"1300",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(s.a,{staticClass:"pa-5"},[t(o.c,[t("h2",[e._v("All Time Top Gym-Goers")]),t(h.a),t("top-gymmers-monthly-modal")],1),t(o.b,[t(u.a,{attrs:{label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e.top_gymmers.length>0?t(n.a,{attrs:{search:e.search,items:e.top_gymmers,headers:e.top_gymmers_header},scopedSlots:e._u([{key:"item.no",fn:function({_:a,index:i}){return[t("p",[e._v(e._s(i+1))])]}},{key:"item.action",fn:function({item:a}){return[t("div",{staticClass:"pa-2"},[t(i.a,{attrs:{size:"40",color:"grey darken-3"}},["n/a"==a.profile_picture_url||null==a.profile_picture_url?t("h2",{staticClass:"white--text"},[e._v(" "+e._s(a.name.charAt(0))+" ")]):t(c.a,{attrs:{src:a.profile_picture_url,width:"100%"}})],1)],1)]}},{key:"item.rank",fn:function({item:a}){return[t("div",[t(r.a,{attrs:{text:"",color:e.get_rank(a.rank).color,large:""}},[e._v(e._s(a.rank)+" "),e._l(e.get_rank(a.rank).stars,(function(a){return t(d.a,{key:a},[e._v(" mdi-star ")])}))],2)],1)]}},{key:"item.formatted_gym_time",fn:function({item:a}){return[t("p",[e._v(e._s(a.total_gym_time/60)+" Hours")])]}}],null,!1,1645321652)}):e._e()],1),t(o.a,[t(r.a,{on:{click:function(t){return e.$emit("close")}}},[e._v("Close")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=V.exports},"13b3":function(e,t,a){},"316e":function(e,t,a){"use strict";a("e6f2")},"63b7":function(e,t,a){},e6f2:function(e,t,a){}}]);